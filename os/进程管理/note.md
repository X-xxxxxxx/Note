# [进程管理](https://blog.csdn.net/u012489236?type=blog)

## 进程概念 
主要是为了提高CPU利用率，在一台计算机实现能将多个程序同时加载、并发执行，从而引入进程的概念

进程是指一个**具有一定独立功能**的**程序**在一个**数据集合**上的一次**动态执行过程**

#### 进程包含了正在运行的一个程序的**所有的状态的信息**

* 代码
* 数据
* 状态寄存器，例如CPU的状态，栈指针，PC指针等
* 通用寄存器
* 进程占用系统资源，打开文件，已分配的内存信息等

#### 特点：动态，并发，独立，制约

#### 进程与程序
* 进程是操作系统处于执行状态程序的抽象

    * 程序: 文件
    * 进程：执行中的程序=程序 + 执行状态
    
* 同一程序的多次执行过程对应为不同的进程
* 进程执行是需要资源
    * 内存
    * CPU

### 进程的生命周期

#### 进程创建
linux系统运行的第一个进程是在初始化阶段“捏造出来的”。而此后的线程或进程都是由一个已存在的进程像细胞分裂一样通过系统调用复制出来的
* 系统初始化创建，例如第一个进程
* 用户请求创建一个新进程
* 正常运行的进程执行创建进程的系统调用
#### 进程执行
进程创建后，就处于就绪状态，进程具备运行条件，等待系统分配处理器以便运行
#### 进程等待

进程不具备运行条件，正在等待某个事件的完成，**此时进程阻塞**

* 请求并等待系统服务，无法马上完成
* 启动某些操作，无法马上完成
* 需要的数据没有到达

#### 进程抢占

* 更高优先级的任务进入TASK_RUNNING状态
* 当前进程的时间片到期

#### 进程唤醒
* 被阻塞进程需要的资源可以满足
* 被阻塞进程等待的事件到达

#### 进程结束

* 正常退出(自愿的)
* 错误退出(自愿的)
* 致命错误退出(强制性的)
* 被其他进程所杀(强制性的)



## 线程

软件功能与功能之间必须并发的执行，当切换进程，需要保存/恢复进程运行环境，还需要切换内存的地址空间，更新块表等开销，所以在进程内部增加了一类实体，**线程**

* 实体之间可以并发执行
* 实体之间共享相同的地址空间

线程是进程的一部分，描述指令流执行状态，它是进程中的指令执行流的最小单元，是**CPU调度的基本单位**（**进程是资源分配的基本单位**）

**线程 = 进程 - 共享资源**

线程优点：

* 一个进程可以同时存在多个线程
* 各个线程之间可以并发执行
* 各个线程之间可共享地址空间和文件等资源

线程缺点：

* 一个线程崩溃，会导致其所属进程的所有线程崩溃 


**进程，线程均具有就绪、等待和运行三种基本状态和状态间的转换关系**

|进程     | 线程 |
| :---: | :---:|
|进程是资源分配单位|线程是CPU调度单位|
|进程拥有一个完整的资源平台|线程只独占指令执行流执行的必要资源，如寄存器和栈|
|进程具有就绪、等待和运行三种基本状态和状态间的转换关系|线程具有就绪、等待和运行三种基本状态和状态间的转换关系|


#### 线程的三种实现

* 用户线程
* 内核线程
* 轻量级线程





